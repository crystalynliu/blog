---

title: æ ·å¼åŒ…è£¹çš„ React ç»„ä»¶ - Styled Components
categories: Coding
tags: [front-end, react, css]

---

è‡ªä»æœ‰äº† web åº”ç”¨å¼€å‘ä»¥æ¥ï¼Œå‰ç«¯çš„å·¥ä½œæ€»æ˜¯ç¦»ä¸å¼€ CSS æ ·å¼çš„å®ç°ï¼Œå®ƒå¯ä»¥è®©æˆ‘ä»¬çš„ web åº”ç”¨å˜å¾—æ›´æ¼‚äº®ï¼Œå¸ƒå±€æ›´åˆç†ã€‚ä½†æ˜¯å‰ç«¯å¼€å‘ç¨‹åºå‘˜ä»¬å‘ç°ä»–ä»¬æ€»æ˜¯åœ¨æ›´æ¼‚äº®çš„é¡µé¢å’Œå¯ç»´æŠ¤çš„ CSS ä»£ç ä¸­æŒ£æ‰ï¼Œä»è€Œä¿ƒè¿›äº† CSS åœ¨ç¼–ç¨‹æ–¹é¢çš„å‘å±•ã€‚

åœ¨å½“å‰çš„å‰ç«¯å‘å±•ä¸­ï¼ŒCSS in Javascript æ˜¯å¾ˆéš¾è®©äººå¿½è§†çš„ï¼Œæ˜¯ä¸€ä¸ªå¾ˆçƒ­é—¨çš„è¶‹åŠ¿ã€‚é‚£æ˜¯å¦åº”è¯¥åº”ç”¨åˆ°é¡¹ç›®ä¸­å‘¢ï¼Ÿæˆ‘ä»¬æ¥è°ˆè°ˆå…¶ä¸­çš„ä¸€ç§ `Styled Components`ã€‚

<!--more-->

# CSS Evolution

## Crazy CSS
å½“ web åº”ç”¨å‡ºç°çš„æ—¶å€™ï¼Œæˆ‘ä»¬æœŸæœ›é€šè¿‡ä¸€ç§æ–¹å¼ç»™é¡µé¢æ·»åŠ ä¸€äº›ä¸åŒçš„å…ƒç´ ï¼Œé¢œè‰²ï¼Œgif å›¾ç‰‡ï¼Œè¶…é“¾æ¥ç­‰ç­‰ï¼Œæ¥å¸å¼•äººçš„æ³¨æ„åŠ›ä»¥æé«˜æ•´ä¸ªç½‘ç«™çš„è®¿é—®é‡ã€‚é‚£ä¸ªæ—¶å€™å¹¶æ²¡æœ‰äººåœ¨æ„å®ç°æ–¹å¼æ˜¯å¦åˆç†ï¼Œåªéœ€è¦æ•ˆæœè¾¾åˆ°é¢„æœŸå°±å¥½ï¼Œé‚£ä¸ªæ—¶å€™ `inline style` å¯èƒ½å°±è¶³å¤Ÿäº†ã€‚

ä½†æ˜¯å½“ç½‘ç«™çš„ä½“é‡å˜å¤§ï¼Œéœ€è¦è·Ÿå¤šçš„å¼€å‘äººå‘˜æ¥ç»´æŠ¤é¡µé¢æ ·å¼çš„æ—¶å€™ï¼Œæ¯ä¸ªäººå¯¹ CSS çš„å®ç°æˆ–è€…æ ·å¼æœ‰ä¸åŒçš„è§è§£ï¼Œè¿™æ—¶å€™ä¸ºäº†è¡¨è¾¾å®ç°æ ·å¼æ„æ„¿çš„å¼ºçƒˆï¼Œå¤§å®¶å¼€å§‹ä½¿ç”¨ `important!`ã€‚

**How is it terrible!** ğŸ˜±

å¾ˆå¿«æˆ‘ä»¬å°±å‘ç°ï¼Œæ¯ä¸ª CSS æ ·å¼åé¢éƒ½ä¼šæœ‰ `important!`, æˆ‘ä»¬å†ä¹Ÿæ²¡æœ‰åŠæ³•æ¸…ç†æ— ç”¨çš„ä»£ç ã€‚è€Œå¯¹åç»­çš„å¼€å‘å’Œç»´æŠ¤é€ æˆäº†å¾ˆå¤§çš„é—®é¢˜ã€‚

## Salvation of Sass

Sass çš„å‡ºç°åƒæ˜¯ç»™äº†å‰ç«¯ç¨‹åºå‘˜çš„æ•‘èµï¼Œå®ƒæ˜¯ä¸€ç§ css é¢„å¤„ç†å¼•æ“ã€‚å®ƒå®ç°äº†**å˜é‡**ï¼Œ**åµŒå¥—**ï¼Œ**mixin** ä»¥åŠç»§æ‰¿ï¼Œèƒ½è®©ä½ åœ¨æ›´å¥½çš„ç»„ç»‡å®ç° css, å¹¶ä¸”å°† css ä»£ç ä»¥å°æ¨¡å—çš„æ–¹å¼æ¥ç»“æ„ã€‚å¾ˆå¤§ç¨‹åº¦ä¸Šè§£å†³äº†css éš¾ä»¥ç»´æŠ¤çš„é—®é¢˜ã€‚

ä½†æ˜¯ï¼ŒSass æ˜¯é¢„å¤„ç†å¼•æ“ï¼Œæœ¬è´¨ä¸Šæ˜¯å°†å…¶ç¼–è¯‘æˆ css ä¹‹åï¼Œæ†ç»‘æ‰“åŒ…åˆ°å…¨å±€çš„è¾“å‡ºæ–‡ä»¶ä¸­ï¼Œè¿™ç§æ–¹å¼çœŸçš„å¥½å—ï¼Ÿæˆ‘ä»¬å¹¶æ²¡æœ‰è§£å†³é—®é¢˜ï¼Œåªæ˜¯ä¾é å‡å°‘åµŒå¥—æ¥ä¼˜åŒ–ä»£ç å¯è¯»æ€§ï¼Œä½†æ˜¯ç¼–è¯‘è¿‡åçš„ css ä»£ç ä¸€æ ·æƒ¨ä¸å¿ç¹, ä¼šæœ‰å„ç§å„æ ·çš„ä¼˜å…ˆçº§é—®é¢˜ã€‚

## Arrival of BEM

å½“ BEM åˆ°æ¥çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç¬¬ä¸€æ¬¡å°†æ ·å¼çš„å®ç°ä¸ component è”ç³»èµ·æ¥ã€‚å°† css è¯­ä¹‰åŒ–å¸¦å…¥äº†ä¸€ä¸ªæ–°çš„ level, æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ç®€å•çš„å—çº§ä¿®é¥°ç¬¦æ¥ç¡®ä¿ class name çš„å”¯ä¸€æ€§ï¼Œè§£å†³ css ä¹‹é—´ä¼˜å…ˆçº§å†²çªçš„é—®é¢˜ã€‚BEM æ˜¯ä¸€ç§å¯ä»¥ css æ¨¡å¼å˜å¾—æ›´æ˜¾è€Œæ˜“è§å¾ˆå¥½çš„æ–¹å¼ã€‚

ä½†æ˜¯å®ƒä¹Ÿå¸¦æ¥çš„æ–°çš„é—®é¢˜ï¼š

* ä¸º class åå­—å˜æˆäº†ä¸€ä¸ªå¾ˆç¹é‡çš„ä»»åŠ¡
* è¿™ç§å¾ˆé•¿çš„å‘½åä½¿ html æ ‡ç­¾å˜å¾—å¾ˆè‡ƒè‚¿
* å¦‚æœä½ æƒ³è¦å¤ç”¨ï¼Œä½ éœ€è¦æ˜¾ç¤ºçš„è¡¨æ˜componentçš„ç»§æ‰¿å…³ç³»

## CSS Modules

Sass å’Œ BEM éƒ½æ²¡æœ‰å®é™…ä¸Šå®ç° css çš„å°è£…æ¦‚å¿µï¼Œåªæ˜¯ä¾èµ–äºå¼€å‘äººå‘˜é€‰æ‹©å”¯ä¸€æ€§çš„ç±»åï¼Œè¿™æ›´åƒæ˜¯ä¸€ç§çº¦å®šã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥ä¾èµ–å·¥å…·æ¥å®Œæˆï¼Œè¿™å°±æ˜¯ `CSS-Modules`ã€‚å®ƒä¾èµ–äºä¸ºæ¯ä¸ª css æ ·å¼åŠ¨æ€çš„åˆ›å»ºä¸€ä¸ªç±»åæ¥ç¡®ä¿æ‰€æœ‰çš„ css æ ·å¼éƒ½è¢«å°è£…ã€‚

å¯ä»¥æ˜¾è€Œæ˜“è§çš„æ˜¯ï¼Œå®ƒè¿…é€Ÿçš„åœ¨ react çš„é¡¹ç›®ä¸­å˜å¾—æµè¡Œèµ·æ¥ã€‚ä½†å®ƒå¹¶ä¸èƒ½å¾ˆå¥½çš„æ˜“äºå¤ç”¨å’Œæ§åˆ¶ï¼Œå®ƒåƒæ˜¯ä¸€ä¸ªèªæ˜çš„ `BEM` è‡ªåŠ¨åŒ–å‘½åå·¥å…·ï¼Œç”Ÿæˆåå­—å¾ˆé•¿å¹¶ä¸”ä¸æ˜“äºè°ƒè¯•ã€‚

ç»¼ä¸Šï¼Œæ¯ä¸€ç§å·¥å…·çš„äº§ç”Ÿéƒ½æœ‰è‡ªå·±æ„ä¹‰ä¸æƒ³è¦è§£å†³çš„é—®é¢˜ã€‚å½“é—®é¢˜å¹¶æ²¡æœ‰è¢«å·²ç»äº§ç”Ÿçš„å·¥å…·æ‰€è§£å†³çš„æ—¶å€™ï¼Œå°±ä¼šå‘å±•å‡ºæ–°çš„å·¥å…· -- **Styled Components**.

# Styled-Components

## Concept

> styled-components utilises tagged template literals to style your components.
> 
> It removes the mapping between components and styles. This means that when you're defining your styles, you're actually creating a normal React component, that has your styles attached to it.

å®ƒçš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯**æ ·å¼å’Œ tag æ ‡ç­¾ï¼ˆæˆ–è€…å…¶ä»–ç»„ä»¶ï¼‰å¯ä»¥å˜æˆä¸€ä¸ª React åŒ…è£¹ç»„ä»¶ï¼Œå°†å…¶å­ç»„ä»¶ä¸€èµ·åŒ…è£…èµ·æ¥æ˜ å°„åˆ°çœŸå®çš„ html æ ‡ç­¾ä¸Šï¼Œ åˆ é™¤äº†ç»„ä»¶å’Œæ ·å¼ä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚** è¿™å¥è¯ä¸€çœ¼çœ‹èµ·æ¥è¿˜æ˜¯å¾ˆæŠ½è±¡ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¾‹å­ä¸­æ…¢æ…¢ç†è§£ã€‚

```Javascript
import React from "react"
import styled from "styled-components"

// ç”Ÿæˆä¸€ä¸ª Title ç»„ä»¶ï¼Œå®ƒæ¸²æŸ“äº†ä¸€ä¸ªå¸¦æ ·å¼çš„ <h1> æ ‡ç­¾ã€‚
const Title = styled.h1`
  font-size: 1.5em;
  text-align: center;
  color: palevioletred;
`;

// ç„¶ååƒä½¿ç”¨å…¶å®ƒçš„ React ç»„ä»¶ä¸€æ ·ä½¿ç”¨å®ƒã€‚
render(
  <Title>
	Hello World!
  </Title>
);

// å®é™…ä¸Šå®ƒå°±ç¼–è¯‘æˆäº†ğŸ‘‡

<h1 class="dxLjPX"> Hello World! <h1>

```

## Motivation

> styled-components is the result of wondering how we could enhance CSS for styling React component systems.

ç›®å‰ **Styled Components åªæ”¯æŒåœ¨ React ç”Ÿæ€ä¸­ä½¿ç”¨**ã€‚

é‚£ `styled-components` æœ‰å“ªäº›ä¼˜åŠ¿ï¼Ÿ

* è‡ªåŠ¨å…³è” css æ ·å¼ï¼šå¯ä»¥æŒç»­è·Ÿè¸ªé¡µé¢ä¸ŠåŠ è½½å‡ºæ¥çš„ç»„ä»¶ï¼Œå¹¶ä¸ºå®ƒæ³¨å…¥æ ·å¼ã€‚è¿™ä¹Ÿå°±æ„å‘³ç€ï¼Œç”¨æˆ·åªç”¨ load æœ€å°‘çš„æ ·å¼ä»£ç 
* ä¸ç”¨æ‹…å¿ƒ class åå­—ï¼šèƒ½ä¸ºæ‰€æœ‰çš„æ ·å¼æ„å»ºå”¯ä¸€çš„ class åå­—ï¼Œä¸ç”¨æ‹…å¿ƒé‡å¤å’Œæ‹¼å†™é”™è¯¯çš„é—®é¢˜
* å®¹æ˜“åˆ é™¤ä¸ç”¨çš„ class: å› ä¸ºç»„ä»¶å’Œæ ·å¼æ˜¯ç»‘å®šåœ¨ä¸€èµ·çš„ï¼Œä¸€ä½†ç»„ä»¶ä¸è¢«ä½¿ç”¨å¹¶åˆ é™¤æ‰ï¼Œå®ƒç›¸å…³è”çš„æ ·å¼ä¹Ÿä¼šè¢«åˆ é™¤
* ä¸»é¢˜ç›¸å…³ï¼šå¯ä»¥å¾ˆæ–¹ä¾¿çš„ä½¿ç”¨ä¸»é¢˜è°ƒæ•´ç»„ä»¶çš„æ ·å¼
* æ›´å®¹æ˜“ç»´æŠ¤ï¼šæ ·å¼æ€»æ˜¯å’Œç»„ä»¶åœ¨ä¸€èµ·ï¼Œä¸éœ€è¦å»åˆ«çš„æ–‡ä»¶å¯»æ‰¾æ ·å¼
* è‡ªåŠ¨æ·»åŠ å‰ç¼€ï¼šåªç”¨ç¼–å†™æ ‡å‡† css, å…¶ä»–çš„ç”± styled-component æ¥è´Ÿè´£

## Basic
### Styling for any components
styled-components å¯ä»¥é€‚ç”¨äºä»»ä½• component, ä¸ç®¡æ˜¯ HTML Dom å…ƒç´ è¿˜æ˜¯ä»»ä½•ç¬¬ä¸‰æ–¹å®šä¹‰çš„ componentï¼ˆåªè¦className props è¢«ä¼ é€’ç»™äº† dom å…ƒç´ ï¼‰ï¼Œéƒ½å¯ä»¥ç”¨å®ƒåŒ…èµ·æ¥ç»„æˆä¸€ä¸ªæ ·å¼ç»„ä»¶ã€‚

```javascript

// If you import a Link componet from `react-router-dom`, you can give style for it as following:

const StyledLink = styled(Link)`
  color: palevioletred;
  font-weight: bold;
`;

// Use for HTML dom

const StyledDiv = styled.div`
  color: palevioletred;
  font-weight: bold;
`;

```

æ ¹æ®ä»¥ä¸Šçš„ä¾‹å­ï¼Œæˆ‘å®šä¹‰äº†ä¸¤ä¸ª styled-components, ä¹‹åï¼Œåœ¨ react render æ–¹æ³•é‡Œå°±å¯ä»¥æŒ‰ç…§æ­£å¸¸çš„ component æ¥ä½¿ç”¨ã€‚**å½“ä½¿ç”¨è¿™ç§æ–¹å¼å®šä¹‰ component çš„æ ·å¼æ—¶ï¼Œå°±ç›¸å½“å®šä¹‰äº†ä¸€ä¸ªæ­£å¸¸çš„ React componentã€‚**

### CSS function based on props
å½“æˆ‘ä»¬ç»™ styled-components åˆ›å»ºçš„ component ä¼ å…¥ props çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å®šä¹‰ styled component çš„æ—¶å€™ï¼Œä½¿ç”¨å‡½æ•°æ¥è°ƒæ•´æ ·å¼ï¼Œprops å°†ä½œä¸ºè¿™ä¸ªå‡½æ•°çš„å‚æ•°ã€‚

```
const StyledDiv = styled.div`
  background: ${props => props.primary ? "palevioletred" : "white"};
  color: ${props => props.primary ? "white" : "palevioletred"};
  width: 200px;
  height: 200 px;
`;
render(
  <div>
    <StyledDiv>Normal</StyledDiv>
    <StyledDiv primary>Primary</StyledDiv>
  </div>
);
```

æ ¹æ®ä¸Šé¢ğŸ‘†è¿™ä¸ªä¾‹å­ï¼Œé€šè¿‡ä¼ å…¥ props çš„å€¼ `primary`, æˆ‘ä»¬åœ¨æ ·å¼æ¨¡æ¿é‡Œæ ¹æ® props.primary çš„å€¼æ¥å®šä¹‰ç»„ä»¶æ ·å¼çš„å˜åŒ–ã€‚

è¿™æ ·å½“ä¸€ä¸ªç»„ä»¶éœ€è¦ JS çš„æ¡ä»¶å˜åŒ–æ¥å®šåˆ¶ç»„ä»¶æ ·å¼çš„ä¸åŒæ—¶ï¼Œstyled-components å°†æ§åˆ¶æƒäº¤ç»™äº† css æœ¬èº«ï¼Œè€Œä¸æ˜¯é€šè¿‡å¤šä¸ªæ¡ä»¶æ¸²æŸ“ä¸åŒçš„ç±»åæ¥å˜åŒ–ã€‚styled-components è¿™ç§æœºåˆ¶ï¼Œå¾ˆå®¹æ˜“å®ç°ç»„ä»¶ä¸»é¢˜çš„å®šåˆ¶ã€‚åªç”¨åœ¨æ ¹ç»„ä»¶ä¸Šå‡ºå…¥ä¸»é¢˜ props ï¼Œé‚£ä¹ˆä¸»é¢˜å°±ä¼šè‡ªåŠ¨æ³¨å…¥åˆ°æ‰€æœ‰å­ç»„ä»¶ä¸Šã€‚

**Notes:** æ ·å¼æ¨¡æ¿é‡Œé¢çš„å‡½æ•°è¦æ€ä¹ˆå†™å•å…ƒæµ‹è¯•å‘¢ï¼Ÿå‚è€ƒ [jest-styled-components](https://github.com/styled-components/jest-styled-components)

### Extending styles

å½“è®¾è®¡å˜å¾—å¤šæ ·æ€§çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šå‘ç°å¾ˆå¤šç»„ä»¶çš„æ ·å¼å¤§éƒ¨åˆ†ç›¸åŒï¼Œåªéœ€è¦ä¸€ç‚¹ç‚¹æ”¹å˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±ä¼šæƒ³å¿µ extend ç»§æ‰¿çš„æ¦‚å¿µã€‚å½“ç„¶ä½ å¯ä»¥ç”¨ä¸åŒçš„ props ç”Ÿæˆä¸åŒçš„æ ·å¼ï¼Œä½†æˆ‘ä»¬ä¸å»ºè®®è¿™ä¹ˆåšï¼Œè¿™æ ·åšä¼šå¢åŠ ç»„ä»¶å¤æ‚æ€§ã€‚å½“æˆ‘ä»¬åªéœ€è¦é™æ€çš„æ ·å¼æ—¶ï¼Œå°±å¯ä»¥é€‰æ‹©ç»§æ‰¿æ¥å¤å†™æ ·å¼ã€‚

```
const StyledDiv = styled.div`
  background: "white";
  color: "palevioletred";
  width: 200px;
  height: 200 px;
`;

const PrimaryDiv = styled(StyledDiv)`
  background: "palevioletred";
  color: "white";
`;

render(
  <div>
    <StyledDiv>Normal</StyledDiv>
    <PrimaryDiv>Primary</PrimaryDiv>
  </div>
);
```

ä»¥ä¸Šçš„ä¾‹å­ä¼šç”Ÿæˆå¦å¤–ä¸€ä¸ªdiv componentï¼Œä½†ä»…ä»…åªæ”¹å˜äº†èƒŒæ™¯è‰²å’Œå­—ä½“é¢œè‰²ã€‚ 







# Reference

- [CSS Evolution: From CSS, SASS, BEM, CSS Modules to Styled Components](https://medium.com/@perezpriego7/css-evolution-from-css-sass-bem-css-modules-to-styled-components-d4c1da3a659b)
- [Styled Components: To Use or Not to Use?](https://medium.com/building-crowdriff/styled-components-to-use-or-not-to-use-a6bb4a7ffc21)

